services:
  01_technical_analyzer:
    build: ./agents/01_technical_analyzer
    container_name: 01_technical_analyzer
    ports:
      - "8001:8000"
    env_file: .env
    restart: always
    networks:
      - trading-network

  03_fibonacci_agent:
    build: ./agents/03_fibonacci_agent
    container_name: 03_fibonacci_agent
    ports:
      - "8003:8000"
    env_file: .env
    restart: always
    networks:
      - trading-network

  04_master_ai_agent:
    build: ./agents/04_master_ai_agent
    container_name: 04_master_ai_agent
    ports:
      - "8004:8000"
    env_file: .env
    restart: always
    volumes:
      - shared_data:/data
    networks:
      - trading-network

  05_gann_analyzer_agent:
    build: ./agents/05_gann_analyzer_agent
    container_name: 05_gann_analyzer_agent
    ports:
      - "8005:8000"
    env_file: .env
    restart: always
    networks:
      - trading-network

  06_news_sentiment_agent:
    build: ./agents/06_news_sentiment_agent
    container_name: 06_news_sentiment_agent
    ports:
      - "8006:8000"
    env_file: .env
    restart: always
    networks:
      - trading-network

  07_position_manager:
    build: ./agents/07_position_manager
    container_name: 07_position_manager
    ports:
      - "8007:8000"
    env_file: .env
    restart: always
    volumes:
      - shared_data:/data
    networks:
      - trading-network

  08_forecaster_agent:
    build: ./agents/08_forecaster_agent
    container_name: 08_forecaster_agent
    ports:
      - "8008:8000"
    env_file: .env
    restart: always
    networks:
      - trading-network

  09_whale_alert_agent:
    build: ./agents/09_whale_alert_agent
    container_name: 09_whale_alert_agent
    ports:
      - "8009:8000"
    env_file: .env
    restart: always
    networks:
      - trading-network

  orchestrator:
    build: ./agents/orchestrator
    container_name: orchestrator
    environment:
      - PYTHONUNBUFFERED=1
    env_file: .env
    restart: always
    volumes:
      - shared_data:/data
    networks:
      - trading-network

  10_learning_agent:
    build: ./agents/10_learning_agent
    container_name: 10_learning_agent
    ports:
      - "8010:8000"
    environment:
      - PYTHONUNBUFFERED=1
      - EVOLUTION_INTERVAL_HOURS=48
      - MIN_TRADES_FOR_EVOLUTION=5
      - BACKTEST_IMPROVEMENT_THRESHOLD=0.5
      - MAX_STRATEGY_ARCHIVE=20
    env_file: .env
    restart: always
    volumes:
      - shared_data:/data
    networks:
      - trading-network

  dashboard:
    build: ./dashboard
    container_name: dashboard
    ports:
      - "8080:8080"
    environment:
      - PYTHONUNBUFFERED=1
    env_file: .env
    restart: always
    volumes:
      - shared_data:/data
    networks:
      - trading-network

networks:
  trading-network:
    driver: bridge

volumes:
  shared_data:
