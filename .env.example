# Bybit API
BYBIT_API_KEY=your_api_key_here
BYBIT_API_SECRET=your_api_secret_here
BYBIT_TESTNET=false

# OpenAI API
OPENAI_API_KEY=your_openai_key_here
OPENAI_MODEL=gpt-4o

# DeepSeek API (for Learning Agent)
DEEPSEEK_API_KEY=your_deepseek_key_here

# CoinGecko API
COINGECKO_API_KEY=your_coingecko_key_here

# Trading Settings
MIN_CONFIDENCE=60
LEVERAGE_SCALP=5
LEVERAGE_SWING=3
SIZE_PCT=0.15
MAX_LEVERAGE=10
MAX_POSITION_SIZE_PCT=0.25

# Trailing Stop
ENABLE_TRAILING_STOP=true
TRAILING_ACTIVATION_PCT=0.01  # 1% ROI to activate trailing (was 1.0)
TRAILING_CALLBACK_PCT=0.5
ENABLE_BREAKEVEN=true
BREAKEVEN_ACTIVATION_PCT=0.5

# Position Manager - AI Review and Reverse
AI_REVIEW_THRESHOLD=-0.08     # -8% loss triggers AI review
REVERSE_THRESHOLD=-0.10       # -10% loss triggers reverse consideration
HARD_STOP_THRESHOLD=-0.20     # -20% loss triggers immediate close

# Position Manager - Debug Configuration
DEBUG_SYMBOLS=BTCUSDT          # Comma-separated list of symbols for detailed debug logs (e.g., BTCUSDT,ETHUSDT,SOLUSDT)

# Intervals
SCAN_INTERVAL=15
MONITOR_INTERVAL=60
LEARNING_INTERVAL=3600

# Crash Guard - Momentum Filters (anti-knife-catching)
CRASH_GUARD_5M_LONG_BLOCK_PCT=0.6
CRASH_GUARD_5M_SHORT_BLOCK_PCT=0.6

# Critical Position Management
CRITICAL_LOSS_PCT_LEV=6.0

# ProFiT Evolution Settings
EVOLUTION_INTERVAL_HOURS=48
MIN_TRADES_FOR_EVOLUTION=5
BACKTEST_IMPROVEMENT_THRESHOLD=0.5
MAX_STRATEGY_ARCHIVE=20

# --- Trailing scalping defaults (safe) ---
TRAILING_ACTIVATION_RAW_PCT=0.0010
FALLBACK_TRAILING_PCT=0.0040
PROFIT_LOCK_ARM_ROI=0.02
PROFIT_LOCK_CONFIRM_SECONDS=60

TRAIL_MIN_PCT_LEV_LE_3=0.0020
TRAIL_MAX_PCT_LEV_LE_3=0.0060
TRAIL_MIN_PCT_LEV_LE_5=0.0015
TRAIL_MAX_PCT_LEV_LE_5=0.0045
TRAIL_MIN_PCT_LEV_LE_8=0.0012
TRAIL_MAX_PCT_LEV_LE_8=0.0035
TRAIL_MIN_PCT_LEV_GE_9=0.0010
TRAIL_MAX_PCT_LEV_GE_9=0.0025
TRAIL_STAGE2_MAX_FACTOR=0.80
TRAIL_STAGE2_MIN_FACTOR=0.90

MIN_SL_MOVE_BTC=15.0
MIN_SL_MOVE_ETH=0.8
MIN_SL_MOVE_SOL=0.05
MIN_SL_MOVE_DEFAULT=0.5

# --- LIMIT Entry Configuration ---
# Default TTL (time-to-live) for LIMIT entry orders in seconds
DEFAULT_ENTRY_TTL_SEC=3600
# Allow scale-in (multiple entries same symbol+side) - use with caution
ALLOW_SCALE_IN=false
# Max pending LIMIT entries per symbol+side (only if ALLOW_SCALE_IN=true)
MAX_PENDING_ENTRIES_PER_SYMBOL_SIDE=1
# Price change threshold for cancel+replace (0.001 = 0.1%)
PRICE_CHANGE_THRESHOLD_FOR_REPLACE=0.001

# Symbol universe
SCAN_SYMBOLS=BTCUSDT,ETHUSDT,SOLUSDT,XRPUSDT,ADAUSDT,DOGEUSDT,AVAXUSDT,LINKUSDT,BNBUSDT,TRXUSDT
DISABLED_SYMBOLS=

# Max open positions (default 10)
MAX_OPEN_POSITIONS=10

# --- RISK-BASED SIZING (Anti-Blowup Protection) ---
# Maximum loss in USDT per single trade (based on SL distance)
MAX_LOSS_USDT_PER_TRADE=0.35
# Maximum total risk across all open positions in USDT
MAX_TOTAL_RISK_USDT=1.5
# Minimum stop loss distance as percentage (0.0025 = 0.25%)
MIN_SL_DISTANCE_PCT=0.0025
# Maximum stop loss distance as percentage (0.025 = 2.5%)
MAX_SL_DISTANCE_PCT=0.025
# Maximum notional size in USDT per trade
MAX_NOTIONAL_USDT=50.0
# Margin safety factor (margin_required must be <= available * safety_factor)
MARGIN_SAFETY_FACTOR=0.85

# --- RECOVERY SIZING (Martingale-like, default OFF in LIVE) ---
# Enable recovery sizing after losses (NOT recommended for LIVE trading)
ENABLE_RECOVERY_SIZING=false

# --- LEVERAGE CONSTRAINTS ---
# Minimum leverage for OPEN actions (enforced floor, default 3)
MIN_LEVERAGE=3
# Maximum leverage for OPEN actions (enforced ceiling, default 10)
MAX_LEVERAGE_OPEN=10
# Enable confidence-based leverage adjustment
ENABLE_CONFIDENCE_LEVERAGE_ADJUST=false
# Confidence thresholds for leverage caps (if enabled)
LEVERAGE_CAP_CONFIDENCE_LOW=60
LEVERAGE_CAP_CONFIDENCE_MED=75
LEVERAGE_MAX_CONFIDENCE_LOW=4
LEVERAGE_MAX_CONFIDENCE_MED=6
